{% extends 'base.html' %}

{% block title %}Dictionary - {{ app_name }}{% endblock %}

{% block content %}
<div class="card-header" style="padding: 0 0 1.5rem 0; border-bottom: 1px solid var(--border); margin-bottom: 1.5rem;">
    <div>
        <h1 style="margin-bottom: 0.25rem;">Dictionary</h1>
        <p style="color: var(--text-secondary);">{{ total }} words saved</p>
    </div>
    <div style="display: flex; gap: 0.75rem;">
        <a href="{{ url_for('main.add_word') }}" class="btn btn-primary">Add Words</a>
        {% if words %}
            <a href="{{ url_for('main.export_csv') }}" class="btn btn-secondary">Export CSV</a>
        {% endif %}
    </div>
</div>

{% if words %}
    <div class="card">
        <div class="word-list" style="padding: 1rem;">
            {% for word in words %}
                <div style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: var(--bg-tertiary); border-radius: var(--radius);">
                    <a href="{{ url_for('main.word_detail', character=word.character) }}" style="text-decoration: none; color: inherit; font-size: 1.5rem;">
                        {{ word.character }}
                    </a>
                    <form method="POST" action="{{ url_for('main.delete_word', word_id=word.id) }}" 
                          onsubmit="return confirm('Delete {{ word.character }}?');" style="margin: 0;">
                        <button type="submit" style="background: none; border: none; color: var(--text-muted); cursor: pointer; padding: 0.25rem; font-size: 1rem;">√ó</button>
                    </form>
                </div>
            {% endfor %}
        </div>
    </div>
    
    {% if total_pages > 1 %}
        <div class="pagination">
            {% if page > 1 %}
                <a href="{{ url_for('main.dictionary', page=page-1) }}" class="page-link">‚Üê Previous</a>
            {% endif %}
            
            {% for p in range(1, total_pages + 1) %}
                {% if p == page %}
                    <span class="page-link active">{{ p }}</span>
                {% else %}
                    <a href="{{ url_for('main.dictionary', page=p) }}" class="page-link">{{ p }}</a>
                {% endif %}
            {% endfor %}
            
            {% if page < total_pages %}
                <a href="{{ url_for('main.dictionary', page=page+1) }}" class="page-link">Next ‚Üí</a>
            {% endif %}
        </div>
    {% endif %}
    
    <div style="text-align: center; margin-top: 2rem;">
        <form method="POST" action="{{ url_for('main.clear_all') }}" onsubmit="return confirm('Are you sure you want to delete ALL words? This cannot be undone.');">
            <button type="submit" class="btn btn-danger btn-sm">Clear All Words</button>
        </form>
    </div>
{% else %}
    <div class="card">
        <div class="empty-state">
            <div class="empty-state-icon">üìö</div>
            <h3 style="margin-bottom: 0.5rem;">No words yet</h3>
            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">Start building your Chinese vocabulary</p>
            <a href="{{ url_for('main.add_word') }}" class="btn btn-primary">Add Your First Word</a>
        </div>
    </div>
{% endif %}
{% endblock %}
